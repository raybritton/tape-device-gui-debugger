package com.raybritton.td_debug.system

fun UByte.isJumpOp(): Boolean {
    return when (this.toInt()) {
        0xE0, 0xE1, 0xC8, 0xC9, 0xD2, 0xD3, in (0x20..0x2D), 0x70, 0x71 -> true
        else -> false
    }
}

fun UByte.isRet(): Boolean {
    return this.toInt() == 0x72
}

fun UByte.mnemonic(): String {
    return when (this.toInt()) {
        0x1, 0x2, 0x7 -> "ADD"
        0x3, 0x4, 0x8 -> "SUB"
        0x5 -> "INC"
        0x6 -> "DEC"
        in (0x10..0x15), 0x18 -> "CPY"
        0x16, 0x17 -> "SWP"
        0x20, 0x21 -> "JMP"
        0x22, 0x23 -> "JE"
        0x24, 0x25 -> "JNE"
        0x26, 0x27 -> "JL"
        0x28, 0x29 -> "JG"
        0x2A, 0x2B -> "OVER"
        0x2C, 0x2D -> "NOVER"
        in (0x30..0x36) -> "CMP"
        0x40, 0x41 -> "MEMR"
        0x42, 0x43 -> "MEMRW"
        in (0x44..0x47) -> "LD"
        0x70, 0x71 -> "CALL"
        0x72 -> "RET"
        0x73, 0x74 -> "PUSH"
        0x75 -> "POP"
        0x76, 0x77 -> "ARG"
        0x90, 0x91, 0x99 -> "PRT"
        0x94, 0x95, 0x9A -> "PRTC"
        0x92 -> "PRTLN"
        0x93 -> "PRTS"
        0x96, 0x97 -> "MEMP"
        0x98 -> "PRTD"
        0xA0, 0xA1, 0xA7 -> "AND"
        0xA2, 0xA3, 0xA8 -> "OR"
        0xA4, 0xA5, 0xA9 -> "XOR"
        0xA6 -> "NOT"
        0xC0, 0xCA -> "FOPEN"
        0xC1, 0xC2, 0xCB, 0xCC -> "FILER"
        0xC3, 0xC4, 0xCD, 0xCE, in (0xD4..0xD7) -> "FILEW"
        0xC5, 0xCF -> "SEEK"
        0xC6, 0xC7, 0xD0, 0xD1 -> "FSKIP"
        0xC8, 0xC9, 0xD2, 0xD3 -> "FCHK"
        0xE0, 0xE1 -> "IPOLL"
        0xE2 -> "RCHR"
        0xE3, 0xE4 -> "RSTR"
        0xE5 -> "RAND"
        0xE6 -> "TIME"
        0xE7 -> "SEED"
        0xFD -> "DEBUG"
        0xFE -> "NOP"
        0xFF -> "HALT"
        else -> "??"
    }
}